---
layout: single
excerpt: ""
title: "p-value 쉽게 설명하기"
date: 2020-04-30 13:10:00 +0900
tags: p-value significance-probability significance-level null-hypothesis alternative-hypothesis
---

언제나 느끼는 것이지만 내가 알고있는 지식을 타인에게 설명하는 일은 생각보다 어렵다. 평소 p-value에 대한 개념을 이해하고 있다고 생각했지만, 며칠 전 관련 지식이 없는 지인에게 이해하기 쉽도록 p-value에 대해 설명하려고 하니 쉽지 않았다. 이 참에 글로 쓰면 정리가 될 것 같아 글로 정리를 해보도록 한다.

## 통계 검정

p-value에 대해 이해하기 위해서는 통계 데이터를 이용하여 가설을 검증하는 과정에 대해 이해가 필요하다.

통계 데이터를 이용하여 가설을 검증할 때는 아래의 과정을 거쳐야 한다.

1. 주장하고자 하는 가설(대립가설, alternative-hypothesis)을 통계 데이터로 참, 거짓을 판단할 수 있는 가설로 변경한다.
1. 대립가설과 반대되는 가설(귀무가설, null-hypothesis)을 정의한다.
1. 통계 데이터 중 일부 데이터(표본 데이터, sampling data)를 추출한다.
1. 귀무가설이 옳다고 판단할 수 있는 기준(유의수준, significance-level)을 정한다.
1. 귀무가설이 옳다고 판단될 확률(유의확률, p-value)를 구하여 유의수준과 비교한 결과로 귀무가설을 채택하거나 기각한다.
1. 귀무가설의 기각 여부에 따라 주장했던 대립가설의 채택 여부를 결정한다.

한 단계씩 살펴보도록 하자.

#### 대립가설과 귀무가설 정의

<b>서울 지역 성인 남성의 평균 키는 크다</b>라는 가설을 세웠다고 하자. 이 가설은 구체적인 수치가 없기 때문에 해당 지역 성인 남성의 키 통계 정보를 가져온다고 하더라고 참과 거짓을 판단하기 어려운 가설이다. 그렇기 때문에 <b>서울 지역 성인 남성의 평균 키는 180cm 이상이다.</b>와 같이 모수가 포함된 가설을 세워 진위 여부를 명확하게 밝힐 수 있도록 정의해야 한다.

이렇게 정의된 가설은 대립가설이라하고 이 대립가설과 상반되는 가설을 귀무가설이라고 한다. 우리의 목적은 귀무가설의 진위여부를 통계 데이터로 증명하고 귀무가설의 진위여부에 따라 우리가 주장한 대립가설의 진위 여부를 증명하는 것이다.

이 예에서는 <b>서울 지역 성인 남성의 평균 키는 180cm 이상이다.</b>는 대립가설, <b>서울 지역 성인 남성의 평균 키는 180cm 미만이다.</b>가 귀무가설이 될 것이다.

#### 표본 데이터 추출

위와 같이 대립가설과 귀무가설이 정의되면, 귀무가설의 진위여부를 실제 데이터로 확인을 해야 한다. 하지만 <b>서울 지역 성인 남성의 평균 키는 180cm 이상이다.</b>의 가설을 증명하기 위해 서울에 사는 모든 성인 남성의 키를 잰다면 매우 비효율적일 것이다. 그렇기 때문에 서울에 살고 있는 성인 남성 중 일부 성인 남성들의 키를 재어서 검증을 진행하는 것이 바람직하다. 

이렇게 가설의 진위여부를 가리기 위해 일부 데이터를 추출한 것을 표본 데이터라고 한다.  

#### 유의수준 정의

위 과정을 거쳤다면 대립가설, 귀무가설, 표본 데이터가 준비되었을 것이다. 하지만, 바로 표본 데이터로 가설을 검증하는 것은 생각해볼 필요가 있다. 만약 일반적이지 않은 굉장히 특이한 케이스만 표본 데이터로 추출되었다면 이 과정에서 증명된 가설이 옳다고 할 수 있을까? 이러한 불안감이 계속 들면 그냥 전체 데이터로 가설을 증명해야 하는 것은 아닐까? 라는 의문이 들 수 있다.

결국 우리는 현실적으로 표본 데이터의 오차 가능성을 인정하고 이 정도 범위의 오차는 허용하자는 타협을 진행해야 한다. 이러한 허용 범위 오차에 대한 기준을 유의수준이라고 하고 0.05의 유의수준이라는 값은 100개의 표본 데이터 중 5개 이상의 표본 데이터가 귀무가설을 지지하지 않는다면 귀무가설이 잘못되었다는 판단하자는 약속이 된다.(즉, 100개 중 5개 정도는 눈감아주자라는 의미)

#### p-value를 이용한 올바른 가설의 선택

이제 유의수준까지 정해졌으니 표본 데이터를 이용하여 귀무가설을 만족하는지 확인해야 한다. 대립가설이 아닌 귀무가설을 판단하는 것은 무죄추정의 원칙과 같다고 생각하면 된다. 표본 데이터가 귀무가설을 강하게 부정하지 않는다면 대립가설을 채택하지 않겠다는 의미이다.

아래와 같은 표본 데이터가 추출되었다고 가정하자. 

```
177, 171, 182, 190, 180, 183, 185, 180, 188, 180
```

<b>서울 지역 성인 남성의 평균 키는 180cm 미만이다.</b>라는 귀무가설이 옳다고 가정했을 때 표본 데이터의 평균은 181.6cm이므로 귀무가설을 만족한다. 10%를 [0,1] 사이의 값으로 표현하면 0.1이 되고 이 값이 p-value(유의확률)가 된다. 만약 앞서 유의수준을 0.1로 정했다면, p-value가 유의수준보다 크므로(0.2 > 0.1) 귀무가설이 올바른 가설이 되어 <b>서울 지역 성인 남성의 평균 키는 180cm 이상이다.</b>로 정의되었던 대립가설은 기각된다.

아래의 표본 데이터를 다시 살펴보자.
 
```
177<=, 171<=, 182, 190, 180, 183, 185, 180, 188, 180,
181, 182, 190, 180, 183, 185, 180, 188, 180, 183,
```

이 표본 데이터에서는 180cm 미만인 경우가 1개 있으므로 1/20 = 0.05의 p-value를 갖게 되고, 0.1의 유의수준보다 작은 값을 갖게 되므로 <b>서울 지역 성인 남성의 평균 키는 180cm 미만이다.</b>라는 귀무가설은 채택되지 않고 대립가설이 채택된다.

두 가지 예에서 알 수 있듯이, 유의 수준에 따라 귀무가설의 채택 여부가 달라지게 되므로 검정해야 할 문제의 정확도가 얼마나 중요한지에 따라 유의 수준을 정할 필요가 있다. 일반적으로 유의수준은 0.05, 0.1, 0.01과 같은 값을 사용하지만, 때에 따라서 6시그마(0.00000001)와 같이 극단적인 오차만을 허용할 수도 있다.

또한 p-value는 귀무가설을 만족하는 표본 데이터의 확률이므로 귀무가설의 진위여부와는 별개로 p-value가 크면 클수록 귀무가설에 대한 설득력이 높아지고, 작을수록 대립가설에 대한 설득력이 높아지게 된다.

주의해야 할 점은 p-value도 통계 데이터를 이용하여 조작할 수 있기 때문에 맹신해서는 안된다는 점이다. p-value를 의도적으로 작게 만들기 위해(대립가설을 채택하기 위해) 표본 데이터의 양을 변경할 수 있다. 보통은 p-value가 작기 때문에 표본 데이터의 양을 늘릴 수록 p-value가 유의수준보다 작을 가능성이 커진다. (두 번째 표본은 대립가설을 채택하기 위해 일부러 표본 데이터의 개수를 늘린 것이다.)

## 결론

지금까지 p-value의 의미와 통계를 이용하여 가설을 검정하는 과정을 살펴보았다. 귀무가설, 대립가설과 같은 용어를 외우는 것은 기억에서 잊기 쉬우니 아래의 전반적인 개념을 이해하는 것이 더 바람직하다.

1. 통계 데이터로 판단이 가능한 가설을 세우고,
1. 가설을 증명하기 위해 <b>표본 데이터</b>를 이용하고,
1. 표본 데이터 특성상 오차 가능성이 있으므로 허용할 수 있는 오차 범위인 <b>유의수준</b>을 정의하고
1. 표본 데이터가 가설과 일치하는 확률인 <b>p-value</b>를 계산하고
1. p-value와 유의수준을 비교하여 어느 가설이 타당한지 판단한다.
